(function(){function e(e){return[0,e.length-1]}function t(e){return[d3.quantile(e,.25),d3.quantile(e,.5),d3.quantile(e,.75)]}d3.box=function(){function l(e){e.each(function(e,t){e=e.map(o).sort(d3.ascending);var l=d3.select(this),c=e.length,h=e[0],p=e[c-1];var d=e.quartiles=a(e);var v=u&&u.call(this,e,t),m=v&&v.map(function(t){return e[t]});var g=v?d3.range(0,v[0]).concat(d3.range(v[1]+1,c)):d3.range(c);var y=d3.scale.linear().domain(s&&s.call(this,e,t)||[h,p]).range([r,0]);var b=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(y.range());this.__chart__=y;var w=l.selectAll("line.center").data(m?[m]:[]);w.enter().insert("line","rect").attr("class","center").attr("x1",n/2).attr("y1",function(e){return b(e[0])}).attr("x2",n/2).attr("y2",function(e){return b(e[1])}).style("opacity",1e-6).transition().duration(i).style("opacity",1).attr("y1",function(e){return y(e[0])}).attr("y2",function(e){return y(e[1])});w.transition().duration(i).style("opacity",1).attr("y1",function(e){return y(e[0])}).attr("y2",function(e){return y(e[1])});w.exit().transition().duration(i).style("opacity",1e-6).attr("y1",function(e){return y(e[0])}).attr("y2",function(e){return y(e[1])}).remove();var E=l.selectAll("rect.box").data([d]);E.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(e){return b(e[2])}).attr("width",n).attr("height",function(e){return b(e[0])-b(e[2])}).transition().duration(i).attr("y",function(e){return y(e[2])}).attr("height",function(e){return y(e[0])-y(e[2])});E.transition().duration(i).attr("y",function(e){return y(e[2])}).attr("height",function(e){return y(e[0])-y(e[2])});var S=l.selectAll("line.median").data([d[1]]);S.enter().append("line").attr("class","median").attr("x1",0).attr("y1",b).attr("x2",n).attr("y2",b).transition().duration(i).attr("y1",y).attr("y2",y);S.transition().duration(i).attr("y1",y).attr("y2",y);var x=l.selectAll("line.whisker").data(m||[]);x.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",b).attr("x2",n).attr("y2",b).style("opacity",1e-6).transition().duration(i).attr("y1",y).attr("y2",y).style("opacity",1);x.transition().duration(i).attr("y1",y).attr("y2",y).style("opacity",1);x.exit().transition().duration(i).attr("y1",y).attr("y2",y).style("opacity",1e-6).remove();var T=l.selectAll("circle.outlier").data(g,Number);T.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",n/2).attr("cy",function(t){return b(e[t])}).style("opacity",1e-6).transition().duration(i).attr("cy",function(t){return y(e[t])}).style("opacity",1);T.transition().duration(i).attr("cy",function(t){return y(e[t])}).style("opacity",1);T.exit().transition().duration(i).attr("cy",function(t){return y(e[t])}).style("opacity",1e-6).remove();var N=f||y.tickFormat(8);var C=l.selectAll("text.box").data(d);C.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(e,t){return t&1?6:-6}).attr("x",function(e,t){return t&1?n:0}).attr("y",b).attr("text-anchor",function(e,t){return t&1?"start":"end"}).text(N).transition().duration(i).attr("y",y);C.transition().duration(i).text(N).attr("y",y);var k=l.selectAll("text.whisker").data(m||[]);k.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",n).attr("y",b).text(N).style("opacity",1e-6).transition().duration(i).attr("y",y).style("opacity",1);k.transition().duration(i).text(N).attr("y",y).style("opacity",1);k.exit().transition().duration(i).attr("y",y).style("opacity",1e-6).remove()});d3.timer.flush()}var n=1,r=1,i=0,s=null,o=Number,u=e,a=t,f=null;l.width=function(e){if(!arguments.length)return n;n=e;return l};l.height=function(e){if(!arguments.length)return r;r=e;return l};l.tickFormat=function(e){if(!arguments.length)return f;f=e;return l};l.duration=function(e){if(!arguments.length)return i;i=e;return l};l.domain=function(e){if(!arguments.length)return s;s=e==null?e:d3.functor(e);return l};l.value=function(e){if(!arguments.length)return o;o=e;return l};l.whiskers=function(e){if(!arguments.length)return u;u=e;return l};l.quartiles=function(e){if(!arguments.length)return a;a=e;return l};return l}})()