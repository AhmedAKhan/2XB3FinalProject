function stash(e){e.x0=e.x;e.dx0=e.dx}function arcTweenData(e,t){function r(t){var r=n(t);e.x0=r.x;e.dx0=r.dx;return arc(r)}var n=d3.interpolate({x:e.x0,dx:e.dx0},e);if(t==0){var i=d3.interpolate(x.domain(),[node.x,node.x+node.dx]);return function(e){x.domain(i(e));return r(e)}}else{return r}}function arcTweenZoom(e){var t=d3.interpolate(x.domain(),[e.x,e.x+e.dx]),n=d3.interpolate(y.domain(),[e.y,1]),r=d3.interpolate(y.range(),[e.y?20:0,radius]);return function(e,i){return i?function(t){return arc(e)}:function(i){x.domain(t(i));y.domain(n(i)).range(r(i));return arc(e)}}}var width=960,height=800,radius=Math.min(width,height)/2;var x=d3.scale.linear().range([0,2*Math.PI]);var y=d3.scale.sqrt().range([0,radius]);var color=d3.scale.category20c();var svg=d3.select("body").append("svg").attr("width",width).attr("height",height).append("g").attr("transform","translate("+width/2+","+(height/2+10)+")");var partition=d3.layout.partition().sort(null).value(function(e){return 1});var arc=d3.svg.arc().startAngle(function(e){return Math.max(0,Math.min(2*Math.PI,x(e.x)))}).endAngle(function(e){return Math.max(0,Math.min(2*Math.PI,x(e.x+e.dx)))}).innerRadius(function(e){return Math.max(0,y(e.y))}).outerRadius(function(e){return Math.max(0,y(e.y+e.dy))});var node;d3.json(flarePath,function(e,t){function r(e){node=e;console.log("clicked node");console.log(e);n.transition().duration(1e3).attrTween("d",arcTweenZoom(e))}node=t;console.log(node);var n=svg.datum(t).selectAll("path").data(partition.nodes).enter().append("path").attr("d",arc).style("fill",function(e){return color((e.children?e:e.parent).name)}).on("click",r).each(stash);d3.selectAll("input").on("change",function(){var t=this.value==="count"?function(){return 1}:function(e){return e.size};n.data(partition.value(t).nodes).transition().duration(1e3).attrTween("d",arcTweenData)})});d3.select(self.frameElement).style("height",height+"px")